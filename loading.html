<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Generating...</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="loading-box">
    <img src="logo.png" alt="Grow a Garden Logo" class="logo-small" />
    <p id="loadingText" class="loading-text"></p>
    <div class="dots">
      <span class="dot done"></span>
      <span class="dot done"></span>
      <span class="dot done"></span>
      <span class="dot"></span>
      <span class="dot"></span>
    </div>
    <button id="verifyBtn" class="hidden" onclick="showCPAModal()">Verify</button>
  </div>

  <!-- Fake CPA Modal -->
  <div class="modal" id="cpaModal">
    <div class="modal-content">
      <img src="logo.png" alt="Grow a Garden" class="modal-logo" />
      <h2>üéÅ LAST STEP !</h2>
      <p>Complete a simple task below and your pet will be sent to your account. Don‚Äôt worry, it‚Äôs free!</p>
      <a href="https://your-cpa-grip-link.com" target="_blank" class="cpa-offer">Enter for a Chance to win a $50 gift card for Roblox!</a>
      <a href="https://your-cpa-grip-link.com" target="_blank" class="cpa-offer">Don‚Äôt miss out! $500 on the line for Walmart, enter NOW!</a>
      <a href="https://your-cpa-grip-link.com" target="_blank" class="cpa-offer">Enter your details to Win a prepaid Visa Card!</a>
      <div class="loader-circle"></div>
    </div>
  </div>

  <script>
    const steps = [
      "Connecting to server...",
      "Successfully connected.",
      "Finding username...",
      { text: "Username found!", class: "green" },
      "Generating items...",
      { text: "Starting transfer...", class: "green" },
      "Verifying human activity...",
      { text: "Human Verification Required.", class: "red" }
    ];

    const loadingText = document.getElementById("loadingText");
    const verifyBtn = document.getElementById("verifyBtn");

    let index = 0;

    function typeMessage(message, callback) {
      loadingText.className = "loading-text";
      if (typeof message === "object") {
        loadingText.classList.add(message.class);
        message = message.text;
      }

      loadingText.textContent = "";
      let i = 0;
      const interval = setInterval(() => {
        loadingText.textContent += message.charAt(i);
        i++;
        if (i >= message.length) {
          clearInterval(interval);
          setTimeout(callback, message.includes("Verifying human activity") ? 4000 : 1000);
        }
      }, 40);
    }

    function showCPAModal() {
      document.getElementById("cpaModal").style.display = "flex";
    }

    function nextStep() {
      if (index >= steps.length) return;
      typeMessage(steps[index], () => {
        document.querySelectorAll(".dot")[index]?.classList.add("done");
        if (steps[index].text?.includes("Human Verification Required.") || steps[index]?.includes("Human Verification Required.")) {
          verifyBtn.classList.remove("hidden");
        }
        index++;
        nextStep();
      });
    }

    window.onload = nextStep;

    // Clear username when user goes back
    window.addEventListener("pageshow", () => {
      if (window.performance && window.performance.navigation.type === 2) {
        sessionStorage.removeItem("username");
      }
    });
  </script>
</body>
</html>
