<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Generating...</title>
  <link rel="stylesheet" href="style.css">
  <style>
    body {
      background: linear-gradient(to bottom, #a2e4f5, #c6f5d4);
      font-family: Arial, sans-serif;
      text-align: center;
      margin: 0;
      padding: 0;
    }
    .loading-box {
      background: white;
      border-radius: 15px;
      padding: 40px;
      margin: 100px auto;
      width: 90%;
      max-width: 500px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    }
    .loading-box img {
      width: 160px;
      margin-bottom: 15px;
    }
    .message {
      font-size: 1.2em;
      margin-bottom: 20px;
    }
    .dots {
      display: flex;
      justify-content: center;
      gap: 8px;
      margin-top: 15px;
    }
    .dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background-color: #ccc;
    }
    .dot.active {
      background-color: #00cc66;
    }
    .verify-btn {
      display: none;
      margin-top: 15px;
      padding: 10px 20px;
      background: #00cc66;
      color: white;
      font-size: 16px;
      font-weight: bold;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div class="loading-box">
    <img src="logo.png" alt="Logo" />
    <div class="message" id="message">Connecting to servers...</div>
    <div class="dots" id="dots">
      <div class="dot" id="dot1"></div>
      <div class="dot" id="dot2"></div>
      <div class="dot" id="dot3"></div>
      <div class="dot" id="dot4"></div>
      <div class="dot" id="dot5"></div>
    </div>
    <button id="verifyBtn" class="verify-btn" onclick="showPopup()">Verify</button>
  </div>

  <script>
    const messages = [
      "Connecting to servers...",
      "Successfully connected.",
      "Finding username...",
      "<span style='color:green'>Username found!</span>",
      "<span style='color:green'>Starting transfer...</span>",
      "Verifying human activity...",
      "<span style='color:red'>Human Verification Required.</span>"
    ];

    const dots = [dot1, dot2, dot3, dot4, dot5];
    const msgElem = document.getElementById("message");
    const verifyBtn = document.getElementById("verifyBtn");

    let step = 0;

    function typeMessage(text, callback) {
      msgElem.innerHTML = "";
      let i = 0;
      const plainText = text.replace(/<[^>]+>/g, "");
      const interval = setInterval(() => {
        msgElem.innerHTML = text.substring(0, i) + "|";
        i++;
        if (i > plainText.length) {
          clearInterval(interval);
          msgElem.innerHTML = text;
          if (callback) callback();
        }
      }, 50);
    }

    function updateStep() {
      if (step >= messages.length) return;
      typeMessage(messages[step], () => {
        if (step < dots.length) dots[step].classList.add("active");
        if (step === 5) {
          setTimeout(() => {
            step++;
            updateStep();
          }, 4000);
        } else {
          step++;
          updateStep();
        }

        if (step === 7) {
          verifyBtn.style.display = "inline-block";
        }
      });
    }

    function showPopup() {
      alert("Redirecting to offer wall...");
      window.location.href = "https://www.cpagrip.com"; // Replace with real CPAGrip URL
    }

    updateStep();

    window.addEventListener("pageshow", function (e) {
      if (e.persisted) {
        window.location.href = "index.html";
      }
    });
  </script>
</body>
</html>
